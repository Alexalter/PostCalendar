<!--[pnsecauthaction comp="::" inst=".*" level="ACCESS_ADD" assign="ACCESS_ADD"]-->
<!--[ if $smarty.get.theme eq "Printer" ]-->
	<!--[* page presented in printer theme *]-->
	<!--[ assign var="ACCESS_ADD" value=0 ]-->
	<!--[ assign var="PRINT_VIEW" value=1 ]-->
<!--[/if]-->
<!--[ if $PRINT_VIEW != 1 ]-->
<!--[ include file="user/postcalendar_user_navigation.html" ]-->
<!--[ /if ]-->

<!--[* add JS to page if needed *]-->
<!--[ pnmodgetvar module="PostCalendar" name="pcUsePopups" assign="pcUsePopups" ]-->
<!--[ if $pcUsePopups eq true ]-->
	<!--[pnpageaddvar name="javascript" value="modules/PostCalendar/pnjavascript/postcalendar_overlibconfig.js"]-->
<!--[ /if ]-->
<!--[ pnmodgetvar module="PostCalendar" name="pcEventsOpenInNewWindow" assign="pcEventsOpenInNewWindow" ]-->
<!--[ if pcEventsOpenInNewWindow eq true ]-->
	<!--[pnpageaddvar name="javascript" value="modules/PostCalendar/pnjavascript/postcalendar_jspopup.js"]-->
<!--[ /if ]-->

<h2 class="postcalendar_header">
			<!--[ if $PRINT_VIEW eq false ]--><a href="<!--[ $PREV_YEAR_URL ]-->">&lt;&lt;</a><!--[/if]-->
    		<!--[ $DATE|date_format:'%Y']-->
			<!--[ if $PRINT_VIEW eq false ]--><a href="<!--[ $NEXT_YEAR_URL ]-->">&gt;&gt;</a><!--[/if]-->
</h2>

<!--[ strip ]-->
<div class="calcontainer">
	<table width="100%" border="0" cellpadding="5" cellspacing="10">  
		<!--[ * Loop through each month of the year * ]-->
		<!--[ foreach name=months item=month key=monthnum from=$CAL_FORMAT ]-->
		<!--[ * check to see if we're starting a new row * ]-->
		<!--[ if $smarty.foreach.months.iteration %4 eq 1  ]-->
		<tr>
		<!--[ /if ]-->
		<td width="25%" valign="top" align="center">
		<!--[ * get the current year we're viewing * ]-->
		<!--[ assign var="y" value=$DATE|date_format:"%Y" ]-->
		<!--[ * figure out what month we are in * ]-->
		<!--[ assign var="m" value=$monthnum+1 ]-->
		<!--[ * make sure we have a preceeding 0 on the month number * ]-->
		<!--[ assign var="m" value=$m|string_format:"%02d" ]-->
		<!--[ * create our link to the month * ]-->
		<table width="100%" border="0" cellpadding="0" cellspacing="0" class="blockcalcontainer">
			<tr>
				<td width="100%" class="blockmonthheader" colspan="8" valign="top" align="center">
					<a href="<!--[ pc_url action="month" date="$y-$m-01" ]-->"><!--[ $A_MONTH_NAMES.$monthnum ]--></a>
				</td>
			</tr>
			<tr>
				<td class="weeklink">&nbsp;</td>
				<!--[ foreach name=daynames item=day from=$S_SHORT_DAY_NAMES ]-->
				<td width="14%" class="daynames" align="center"><!--[ $day ]--></td>
				<!--[ /foreach ]-->
			</tr>
			<!--[ foreach name=weeks item=days from=$month ]-->
			<tr>
				<td align="center" valign="middle" class="weeklink">
					<a href="<!--[ pc_url action="week" date=$days[0] ]-->" class="weeklink">&gt;</a>
				</td>
				<!--[ foreach name=day item=date from=$days ]-->
				<!--[ assign var="themonth" value=$date|date_format:"%m" ]-->
				<!--[ if $date == $TODAY_DATE && $themonth == $smarty.foreach.months.iteration ]-->
					<!--[ assign var="stylesheet" value="monthtoday" ]-->
				<!--[ elseif $themonth == $smarty.foreach.months.iteration ]-->
					<!--[ assign var="stylesheet" value="monthon" ]-->
				<!--[ else ]-->
					<!--[ assign var="stylesheet" value="monthoff" ]-->
				<!--[ /if ]-->
				<td width="14%" align="center" class="<!--[ $stylesheet ]-->">
					<!--[ assign var="classname" value="event-none" ]-->						 		   
					<!--[ if (isset($A_EVENTS.$date)) ]-->

					<!--[ if $A_EVENTS.$date|@count > 2  ]-->
						<!--[ assign var="classname" value="event-three" ]-->
					<!--[ elseif $A_EVENTS.$date|@count > 1  ]-->
						<!--[ assign var="classname" value="event-two" ]-->
					<!--[ elseif $A_EVENTS.$date|@count > 0  ]-->
						<!--[ assign var="classname" value="event-one" ]-->
					<!--[ /if ]--> 																 		   
					<!--[ /if ]-->
					<a class="<!--[ $classname ]-->" href="<!--[ pc_url action=day date=$date ]-->"><!--[ $date|date_format:"%d" ]--></a></td>
				<!--[ /foreach ]-->
			</tr>
			<!--[ /foreach ]-->
		</table>
		<!--[ /foreach ]-->
		</td>
		<!--[ if $smarty.foreach.months.iteration %3 eq 1  ]-->
		</tr>
		<!--[ /if ]-->
	</table>
</div><!-- end calcontainer -->
<!--[ /strip ]-->
<div style='text-align:right;'>
	<!--[ if $PRINT_VIEW eq true ]-->
		<!--[ assign var="viewtype" value=$smarty.get.viewtype ]-->
		<!--[if ((empty($smarty.get.viewtype)) or (!isset($smarty.get.viewtype)))]-->
			<!--[pnmodgetvar module="PostCalendar" name="pcDefaultView" assign="viewtype" ]-->
		<!--[/if]-->
		<a href="<!--[pnmodurl modname="PostCalendar" func="view" viewtype=$viewtype Date=$smarty.get.Date ]-->"><!--[pnml name="_PC_RETURN']--></a>
	<!--[/if]-->
</div>
<!--[ include file="user/postcalendar_user_footer.html" ]-->
